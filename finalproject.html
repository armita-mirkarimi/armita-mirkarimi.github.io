<!DOCTYPE html>
<html>
<head>
  <title>Mapping Iran's Contemporary Protests</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  
  <style>
    .map-container {
      height: 800px; 
      width: 500px; /* Add a semicolon here */
      margin-bottom: 50px; 
    }
    html, body {
      height: 100%;
      margin: 2;
      padding: 2;
    }
     table {
      width: 80%; /* table width to 80% of container */
      margin: 0 auto; /* Center table horizontally */
      border-collapse: collapse; /* Collapse borders */
    }
    th, td {
      border: 1px solid #ccc; /* borders to cells */
      padding: 10px; /* padding for spacing */
      text-align: center; /* Center-align text within cells */
    }
  </style>
</head>
<body>
  
  <!-- This is my title -->
  <h1 style="color: #FFFFFF;
            background: #FFFFFF;
            text-shadow: 2px 2px 0 #4074b5, 2px -2px 0 #4074b5, -2px 2px 0 #4074b5, -2px -2px 0 #4074b5, 2px 0px 0 #4074b5, 0px 2px 0 #4074b5, -2px 0px 0 #4074b5, 0px -2px 0 #4074b5;
            color: #FFFFFF;
            background: #FFFFFF;">
    <center>Mapping Iran's Contemporary Protests</center>
  </h1>

  <!-- This is my subtitle -->
  <h2 style="font: georgia;">
    Since the 1979 Islamic Revolution, Iran has been riddled with bursts of protest with various causes and flashpoints.
    From the closure of reformist newspapers and election integrity to economic price hikes, Iran's protests in the modern day 
    are essential features in understanding life under the Islamic Republic. On this page, I walk through the following protests 
    in recent Iranian history: 
    <ol style="font: georgia; color: #800000;">
      <li>The 1999 Student Protests</li>
      <li>The 2009 Green Movement</li>
      <li>The 2017-18 Economic Protests</li>
      <li>2019 Price Hike Protests</li>
    </ol>
    The map on this page will show the geography of these protests: Where they are dispersed in the country and the number of deaths,
    detainments, and participants. 
  </h2>

  <!-- This is my second title --> 

  <h1 style="color: #FFFFFF;
            background: #B30000;
            color: #FFFFFF;
            background: #B30000;">
    
    Let's start with the population of Iran.
    
  </h1>

  <!-- This is my first map -->
  <div class="map-container" id="map"></div>

  <!-- This is my second map -->
  <div class="map-container" id="map1"></div>

  <h2 style="color: #FFFFFF;
            background: #B30000;
            color: #FFFFFF;
            background: #B30000;">

What do these points all mean? 
    
  </h2>

  <table>
    <tr>
        <th style="font-size: 22px; color: #B30000;" colspan="4">Contemporary Protests in a Snapshot</th>
    </tr>
    <tr>
        <th style="font-size: 18px;">Protest Name</th>
        <th style="font-size: 18px;">Deaths</th>
        <th style="font-size: 18px;">Detained</th>
        <th style="font-size: 18px;">Participants</th>
    </tr>
    <tr>
        <td>The 1999 Student Protests</td>
        <td>4</td>
        <td>14,000</td>
        <td>10,000</td>
    </tr>
    
    <tr>
      <td>The 2009 Green Movement</td>
      <td>100</td>
      <td>4,000</td>
      <td>3,000,000</td>
    </tr>

    <tr>
      <td>The 2017-18 Economic Protests</td>
      <td>22</td>
      <td>3,700</td>
      <td>42,000</td>
    </tr>

    <tr>
      <td>2019 Price Hike Protests</td>
      <td>304</td>
      <td>7,000</td>
      <td>200,000</td>
    </tr>

    <tr>
      <td>January 2020 Protests</td>
      <td>Unknown</td>
      <td>30</td>
      <td>4,000</td>
    </tr>
  </table>

  <h2 style="color: #FFFFFF;
            background: #B30000;
            color: #FFFFFF;
            background: #B30000;">

Let's overlay the maps together! 
    
  </h2>

  <!-- This is both of my maps together --> 

  <div class="map-container" id="map2"></div>
  <button id="toggleButton">Toggle Map</button>

<script>
  $(document).ready(function () {
    // Function to create the third map and its layers
    function createThirdMap(containerId, geojsonData) {
      var map = L.map(containerId).setView([32.4279, 53.6880], 5);

      L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: 'Courtesy of Humanitarian Data Exchange'
      }).addTo(map);

      var populationLayer = L.layerGroup().addTo(map);
      var protestLayer = L.layerGroup().addTo(map);

      $.ajax({
        url: geojsonData,
        dataType: "json",
        success: function (data) {
          L.geoJson(data, {
            style: function (feature) {
              return {
                color: containerId === "map2" ? "#002800" : "red",
                weight: 3,
                opacity: 0.5
              };
            },
            onEachFeature: function (feature, layer) {
              if (containerId === "map2") {
                layer.bindPopup("<b>Population: " + feature.properties.POPULATION + "</b>");
              } else {
                layer.bindPopup("<b>Deaths: " + feature.properties.DEATHS + "</b>");
              }
            }
          }).addTo(containerId === "map2" ? populationLayer : protestLayer);
        },
        error: function (xhr) {
          alert(xhr.statusText);
        }
      });
    }

    // Create the first and second maps
    createThirdMap("map", "Iran_Population.geojson");
    createThirdMap("map1", "Protest_data2.geojson");
    
    // Toggle button click event
    $("#toggleButton").click(function () {
      var map2 = L.map("map2").setView([32.4279, 53.6880], 5);
      L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: 'Courtesy of Humanitarian Data Exchange'
      }).addTo(map2);

      if (map2.hasLayer(populationLayer)) {
        map2.removeLayer(populationLayer);
        map2.removeLayer(protestLayer);
      } else {
        populationLayer.addTo(map2);
        protestLayer.addTo(map2);
      }
    });
  });
</script>

</body>
</html>
