<!DOCTYPE html>
<html>
<head>
  <title>Mapping Iran's Contemporary Protests</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  
  <style>
    #map {
      height: 400px;
      width: 700px;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  
  <!-- This is my title -->
  
  <h1 style="color: #FFFFFF;
            background: #FFFFFF;
            text-shadow: 2px 2px 0 #4074b5, 2px -2px 0 #4074b5, -2px 2px 0 #4074b5, -2px -2px 0 #4074b5, 2px 0px 0 #4074b5, 0px 2px 0 #4074b5, -2px 0px 0 #4074b5, 0px -2px 0 #4074b5;
            color: #FFFFFF;
            background: #FFFFFF;"
  ><center>Mapping Iran's Contemporary Protests</center></h1>

  <!-- This is my subtitle -->

  <h2 style="font: gerogia;">
    
    Since the 1979 Islamic Revolution, Iran has been riddled with bursts of protest with various causes and flashpoints.
    From the closure of reformist newspapers and election integrity to economic price hikes, Iran's protests in the modern day 
    are essential features in understanding life under the Islamic Republic. On this page, I walk through the following protests 
    in recent Iranian history: 

    <ol style="font: georgia;
              color: #800000;">
      
      <li>The 1999 Student Protests</li>
      <li>The 2009 Green Movement</li>
      <li>The 2017-18 Economic Protests</li>
      <li>2019 Price Hike Protests</li>
      
    </ol>

    The map on this page will show the geography of these protests: Where they are dispersed in the country and the number of deaths,
    detainments, and participants. 
    
  </h2>

  <!-- This is my second big header -->

  <h1 style="color: #FFFFFF;
             background: #B30000;
             color: #FFFFFF;
             background: #B30000;"
    >Let's start with understanding the population landscape of Iran before diving into the geographies of every protest   
  </h1>

    <!-- This is my first map -->

  <div id="map"></div>

  <script>
    function symbology(feature) {
      var population = feature.properties.POPULATION;
      var lineColor = "red";

      return {
        color: lineColor,
        weight: 3,
        opacity: 0.5
      };
    }

    $(document).ready(function () {
      var map = L.map("map").setView([32.4279, 53.6880], 4);

      var title = L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: 'Your attribution here'
      }).addTo(map);

      // Create population layer 
      var population = L.layerGroup().addTo(map);

      var response = $.ajax({
        url: "Iran_Population.geojson",
        dataType: "json",
        success: function (data) {
          var population = L.geoJson(data, {
            color: "#002800",
            weight: 3,
            opacity: 0.5,
            onEachFeature: function (feature, layer) {
              layer.bindPopup("<b>Population: " + feature.properties.POPULATION + "</b>");
            }
          }).addTo(map);  // Add to the layer group
        },
        error: function (xhr) {
          alert(xhr.statusText);
        }
      });

       var all = $.when(response);

      all.done(function () {
        // Additional logic can be added here if needed
      });
      
  </script>

  <!--This is a second map-->
 
  <div id="map1"></div>

  <script>
    // Define symbology function outside the .done function
    function symbology(feature) {
      var population = feature.properties.POPULATION;
      var lineColor = "red";

      return {
        color: lineColor,
        weight: 3,
        opacity: 0.5
      };
    }

    $(document).ready(function () {
      var map = L.map("map").setView([32.4279, 53.6880], 4);

      var title = L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: 'Your attribution here'
      }).addTo(map);

      // Create a layer group for population and protest data
      var populationprotest = L.layerGroup().addTo(map);

      var response = $.ajax({
        url: "Iran_Population.geojson",
        dataType: "json",
        success: function (data) {
          var populationLayer = L.geoJson(data, {
            color: "#002800",
            weight: 3,
            opacity: 0.5,
            onEachFeature: function (feature, layer) {
              layer.bindPopup("<b>Population: " + feature.properties.POPULATION + "</b>");
            }
          }).addTo(populationprotest);  // Add to the layer group
        },
        error: function (xhr) {
          alert(xhr.statusText);
        }
      });

      var response1 = $.ajax({
        url: "Protest_data.geojson",
        dataType: "json",
        success: function (data) {
          var protestLayer = L.geoJson(data, {
            style: symbology,
            onEachFeature: function (feature, layer) {
              layer.bindPopup("<b>Deaths: " + feature.properties.DEATHS + "</b>");
            }
          }).addTo(populationprotest);  // Add to the layer group
        },
        error: function (xhr) {
          alert(xhr.statusText);
        }
      });

      var all = $.when(response, response1);

      all.done(function () {
        // Additional logic can be added here if needed
      });
    });
  </script>
</body>
</html>
