<!DOCTYPE html>
<html>
<head>
  <title>Hello Campus!</title>
  <!-- Leaflet script library -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- CSS stylesheet for Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <!-- Jquery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <!-- Stamen -->
  <script type="text/javascript" src="https://maps.stamen.com/js/tile.stamen.js?v1/3/0"></script>
  <!-- Internal stylesheet -->
  <style>
    #map {
      height: 400px;
      width: 700px;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #buttons {
      padding: 10px;
      background: #de907d;
    }
  </style>

  <!-- Load GeoJSON data -->
  <script src="NH_Community_Center_Areas.geojson"></script>
    
<script> // This is where we create the map

  // First add some objects for base tiles
  var NHCClayer;
  var NHCCVisible = false;
  var OpenStreetMap_HOT = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',
    { maxZoom: 19,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.osm.org">HOT OSM</a>'
    });

  var StamenLayer = L.stamen.tileLayer("toner");
  function lineSymbology(feature) {
    var Shape_Length = feature.properties.Shape_Length; 
    var linewidth = 2 
    var lineColor = "#319d17"; 

    if (Shape_Length > 9501.5197505430751) { lineColor = "#008080"; linewidth = 8 } 
    if (Shape_Length > 11844.011334866394) { lineColor = "#3f48cc"; linewidth = 4 } 

    return {
      color: lineColor, 
      weight: linewidth, 
      opacity: 1
    }; 

  }

  // Then initialize the map itself
  function initialize() {
    var map = L.map('map', { 
      center: [43.7034, -72.2887],
        zoom: 15   
    }); 

    var baseMaps = {
      "OSM": OpenStreetMap_HOT,
      "Stamen": StamenLayer
    };

    L.control.layers(baseMaps).addTo(map);

    NHCClayer = L.geoJson(nhcc, {
               style: lineSymbology,
              onEachFeature: function(feature, layer) {
                  layer.bindPopup("<b>ACRES: " +
                  feature.properties.ACRES + "</b>,<br>" + 
                  "Shape_Length: " + 
                  feature.properties.Shape_Length + "<br>" + 
                  "Shape_Area: " + 
                  feature.properties.Shape_Area);
                }
               
              });

      $("#toggleNHCC").click( function() { 
        if (NHCCVisible) {
          NHCCVisible = false; 
          NHCClayer.removeFrom(map); 
        } else {
            NHCCVisible = true; 
            NHCClayer.addTo(map); 
        }
      })  
  }
</script> 
</head>
  
<body onload="initialize()"> 
  <h1> Hello Campus!</h1>
  <div id="map"></div> 
  <div id="buttons">
    <button id="toggleNHCC">Toggle New Hampshire Community Center Layer.</button>
  </div>
</body>
</html>
